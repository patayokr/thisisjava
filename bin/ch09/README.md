# 09 중첩 선언과 익명 객체

## 중첩클래스

- 중첩 클래스 : 클래스 내부에 선언한 클래스
- 클래스가 특정 클래스만 관계를 맺을때 중첩클래스로 선언하면 유지보수에 도움이 된다.
- 클래스의 멤버를 쉽게 사용할 수 있고 외부에는 중첩 관계 클래스를 감춤으로써 코드의 복잡성을 줄일 수 있다.
- ![중첩 클래스 종류](/src/ch09/image/Nested_class.jpg)
- 인스턴스 멤버 클래스는 특정 클래스 내부에서 사용되므로 `private`접근 제한을 갖는것이 일반적이다.
- 내부 어디에서나 생성할 수는 없고 인스턴스 필드값,생성자,인스턴스 메소드에서 생성할 수 있다.

## 정적 멤버 클래스

- static 키워드와 같이 A클래스의 멤버로 선언된 B클래스를 말한다. -`java
[public] class A{
   [public|private] static class  B{}
}`
- 정적 멤버 클래스 B는 A클래스 외부에서 A와 함께 사용되는 경우가 많기 때문에 주로 default 또는 public 접근 제한을 가진다.

## 로컬 클래스

```java
[public] class A{
   public A(){
      class B{
      }
   }
   public void method(){
      class B{}
   }
}
```

- 로컬 클래스는 생성자와 메소드가 실행될 동안에만 객체를 생성할 수 있다.
- 로컬변수(생성자 또는 매개변수 또는 내부에서 선언된 변수) 를 로컬클래스에서 사용할 경우에는 로컬 변수는 final특성을 갖게 된다.
- java 8 이후부터는 명시적으로 final 키워드를 붙이지 않아도 되지만 java 7 이전에는 반드시 final 키워드를 붙여하 한다. [관련 코드](/src/ch09/sec04/exam03/A.java)

## 바깥 멤버 접근

- 중첩클래가 어떻게 선언되었느냐에 따라 바깥 클래스의 멤버(필드,메소드)의 접근 제한이 있을 수 있다.
- 정적 멤버 클래스는 바깥 객체가 없어도 사용 가능해야 하므로 바깥 클래스의 인스턴스 필드와 인스턴스 메소드는 사용할 수 없다.[관련 코드](/src/ch09/sec05/exam01/A.java)

### 바깥 클래스의 객체 접근

- 중첩 클래스 내부에서 바깥 클래스의 객체를 얻으려면 바깥 클래스 이름에 `this`를 붙여주면 된다. [관련 코드](/src/ch09/sec05/exam02/A.java)

## 중첩 인터페이스

- 클래스 멤버로 선언된 인터페이스
- 해당 클래스와 긴밀한 관계를 맺는 구현객체를 만들기 위함

```java
class A{
   [public|private][static] interfaceB{
      //상수필드
      //추상 메소드
      //디폴트 메소드
      //정적 메소드
   }
}
```

- 외부의 접근을 막지 않으려면 `public` A 클래스 내부에서만 사용하려면 `private` 접근제한자를 붙이지 않으면 같은 패키지에서만 접근 가능하다
- A 객체없이 B 인터페이스를 사용하려면 `static` 키워드를 추가한다.
- 중첩 인터페이스는 안드로이드와 같은 UI 프로그램에서 이벤트를 처리할 목적으로 많이 활용된다. [관련 코드](/src/ch09/sec06/exam03/ButtonExample.java)

## 익명 객체

- 이름이 없는 객체를 의미한다.
- 필드값,로컬 변수값,매개변수값 으로 주로 사용한다.
- 익명객체는 클래스를 상속하거나 인터페이스를 구현해야지만 생성할 수 있다.
- 클래스를 상속해서 만들 경우 `익명 자식 객체` 라고 하고 인터페이스를 구현해서 만들 경우 `익명 구현 객체`라고 한다.

### 익명 자식 객체

- 익명 자식 객체는 부모 클래스를 상속받아 다음과 같이 생성된다

```java
 new 부모생성자(매개값,...){
   //필드
   //메소드
 }
```

- 중괄호 블록 안의 필드와 메소드는 익명 자식객체가 가져야할 멤버이다.
- 익명 자식객체는 부모타입에 대입되므로 부모타입에 선언된 멤버만 접근할 수 있다.
- 중괄호 블록 안에는 주로 부모 메소드를 재정의하는 코드가 온다.
- [관련 코드](/src/ch09/sec07/exam01/CarExample.java)

### 익명 구현 객체

- 익명 구현 객체를 인터페이스를 구현해서 다음과 같이 생성된다.

```java
new 인터페이스(){
   //필드
   //메소드
}
```

- 중괄호 블록 안의 필드와 메소드는 익명 구현 객체가 가져야할 멤버로, 중괄호 블록 안에서만 사용할 수 있다.
- 익명 구현 객체는 인터페이스 타입에 대입되므로 인터페이스 타입에 선언된 멤버만 접근할 수 있다.
- 중괄호 블록 안에는 주로 인터페이스의 추상 메소드를 재정의하는 코드가 온다.
- [관련 코드](/src/ch09/sec07/exam02/HomeExample.java)
